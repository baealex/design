<!-- layout: base.html -->
<!-- title: BaeJino Design -->

<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&family=Inter:wght@400;500&display=swap');

    body {
        background: #08080f;
        color: #fff;
        font-family: 'Inter', sans-serif;
        overflow: hidden;
        height: 100vh;
    }

    /* Ambient background orbs for glassmorphism depth */
    .bg-ambient {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .bg-orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(100px);
        animation: drift 25s ease-in-out infinite;
    }

    .bg-orb-1 {
        width: 500px;
        height: 500px;
        background: rgba(99, 102, 241, 0.12);
        top: -10%;
        left: -5%;
        animation-delay: 0s;
    }

    .bg-orb-2 {
        width: 400px;
        height: 400px;
        background: rgba(6, 182, 212, 0.08);
        bottom: -15%;
        right: 15%;
        animation-delay: -8s;
    }

    .bg-orb-3 {
        width: 350px;
        height: 350px;
        background: rgba(236, 72, 153, 0.06);
        top: 50%;
        right: -5%;
        animation-delay: -16s;
    }

    @keyframes drift {
        0%, 100% { transform: translate(0, 0) scale(1); }
        33% { transform: translate(30px, -20px) scale(1.05); }
        66% { transform: translate(-20px, 15px) scale(0.95); }
    }

    /* App layout */
    .app {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        height: 100vh;
    }

    /* Header */
    .app-header {
        display: flex;
        align-items: center;
        padding: 16px 24px;
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        flex-shrink: 0;
        position: relative;
    }

    .app-header::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
    }

    .header-left {
        display: flex;
        align-items: baseline;
        gap: 12px;
        flex: 1;
    }

    .logo {
        font-family: 'Montserrat', sans-serif;
        font-size: 1rem;
        font-weight: 900;
        margin: 0;
        letter-spacing: -0.02em;
    }

    .tagline {
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.3);
        margin: 0;
    }

    .header-link {
        color: rgba(255, 255, 255, 0.3);
        text-decoration: none;
        transition: color 0.2s;
        display: flex;
        align-items: center;
    }

    .header-link:hover {
        color: rgba(255, 255, 255, 0.6);
    }

    /* Main split */
    .app-main {
        display: flex;
        flex: 1;
        min-height: 0;
    }

    /* Preview pane */
    .preview-pane {
        flex: 3;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .preview-frame {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 16px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow:
            0 8px 32px rgba(0, 0, 0, 0.4),
            inset 0 1px 0 rgba(255, 255, 255, 0.06);
    }

    .preview-frame::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent 10%, rgba(255, 255, 255, 0.15) 50%, transparent 90%);
        z-index: 2;
    }

    .preview-frame iframe {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        border: none;
        opacity: 1;
        transition: opacity 0.3s ease;
    }

    .preview-frame iframe.fade-out {
        opacity: 0;
    }

    .preview-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 12px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        background: rgba(8, 8, 15, 0.7);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.06);
        z-index: 2;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .preview-frame:hover .preview-bar {
        opacity: 1;
    }

    .preview-info {
        min-width: 0;
    }

    .preview-title {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.82rem;
        font-weight: 700;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .preview-desc {
        font-size: 0.7rem;
        color: rgba(255, 255, 255, 0.4);
        margin-top: 2px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .preview-open {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        font-size: 0.72rem;
        font-weight: 600;
        padding: 6px 14px;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.2s;
        flex-shrink: 0;
        white-space: nowrap;
    }

    .preview-open:hover {
        background: rgba(255, 255, 255, 0.15);
        color: #fff;
    }

    .preview-open:focus-visible {
        outline: 2px solid rgba(255, 255, 255, 0.5);
        outline-offset: 2px;
    }

    /* Sidebar */
    .sidebar {
        flex: 2;
        min-width: 320px;
        max-width: 420px;
        display: flex;
        flex-direction: column;
        min-height: 0;
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-left: 1px solid rgba(255, 255, 255, 0.06);
        position: relative;
    }

    .sidebar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        width: 1px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.1), transparent 30%, transparent 70%, rgba(255, 255, 255, 0.1));
        z-index: 1;
    }

    .sidebar-scroll {
        flex: 1;
        overflow-y: auto;
        padding: 12px;
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.08) transparent;
    }

    .sidebar-scroll::-webkit-scrollbar { width: 3px; }
    .sidebar-scroll::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 2px;
    }

    /* Section divider */
    .section-divider {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.6rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: rgba(255, 255, 255, 0.2);
        padding: 16px 12px 8px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .section-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: rgba(255, 255, 255, 0.06);
    }

    /* Card */
    .card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 12px;
        margin-bottom: 2px;
        border-radius: 10px;
        border: 1px solid transparent;
        background: transparent;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
        color: #fff;
        width: 100%;
        text-align: left;
        font-family: inherit;
        font-size: inherit;
    }

    .card:hover {
        background: rgba(255, 255, 255, 0.04);
        border-color: rgba(255, 255, 255, 0.06);
    }

    .card.active {
        background: rgba(255, 255, 255, 0.06);
        border-color: rgba(255, 255, 255, 0.12);
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .card:focus-visible {
        outline: 2px solid rgba(255, 255, 255, 0.5);
        outline-offset: 1px;
    }

    .card-year {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.68rem;
        font-weight: 800;
        color: rgba(255, 255, 255, 0.18);
        min-width: 36px;
        flex-shrink: 0;
    }

    .card-icon {
        font-size: 1.1rem;
        min-width: 36px;
        text-align: center;
        flex-shrink: 0;
    }

    .card-body {
        flex: 1;
        min-width: 0;
    }

    .card-title {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.78rem;
        font-weight: 700;
        line-height: 1.3;
    }

    .card-desc {
        font-size: 0.68rem;
        color: rgba(255, 255, 255, 0.3);
        margin-top: 1px;
        line-height: 1.4;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .card.active .card-year {
        color: rgba(255, 255, 255, 0.35);
    }

    .card.active .card-desc {
        color: rgba(255, 255, 255, 0.45);
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
        .bg-orb { animation: none !important; }
        .preview-frame iframe { transition: none !important; }
        .preview-bar { transition: none !important; opacity: 1 !important; }
        .card { transition: none !important; }
    }

    /* Mobile */
    @media screen and (max-width: 768px) {
        .app-main {
            flex-direction: column;
        }

        .app-header {
            padding: 12px 16px;
        }

        .tagline {
            display: none;
        }

        .preview-pane {
            flex: none;
            height: 38vh;
            padding: 12px;
        }

        .preview-frame {
            border-radius: 12px;
        }

        .preview-bar {
            opacity: 1;
            padding: 10px 16px;
        }

        .sidebar {
            flex: 1;
            min-width: 0;
            max-width: none;
            border-left: none;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .sidebar::before {
            display: none;
        }

        .sidebar-scroll {
            padding: 8px;
        }

        .card {
            padding: 10px;
        }
    }

    @media screen and (max-width: 480px) {
        .preview-pane {
            height: 32vh;
            padding: 8px;
        }

        .card-desc {
            display: none;
        }
    }
</style>

<body>
    <div class="bg-ambient">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <div class="app">
        <header class="app-header" role="banner">
            <div class="header-left">
                <h1 class="logo">BaeJino Design</h1>
                <p class="tagline">Design trends, reimagined</p>
            </div>
            <a class="header-link" href="https://github.com/baealex/design" target="_blank" rel="noopener noreferrer" aria-label="View source on GitHub">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </a>
        </header>

        <div class="app-main">
            <div class="preview-pane" aria-label="Design preview">
                <div class="preview-frame">
                    <iframe id="preview-iframe" title="Design preview"></iframe>
                    <div class="preview-bar">
                        <div class="preview-info">
                            <div class="preview-title" id="preview-title"></div>
                            <div class="preview-desc" id="preview-desc"></div>
                        </div>
                        <a class="preview-open" id="preview-open" href="#">Open</a>
                    </div>
                </div>
            </div>

            <aside class="sidebar" role="complementary" aria-label="Design catalog">
                <div class="sidebar-scroll" id="sidebar-scroll"></div>
            </aside>
        </div>
    </div>
</body>

<script>
    var pages = $DATA.pages;

    var EFFECT_ICONS = {
        'effect-confetti': '\u{1F38A}',
        'effect-fireworks': '\u{1F386}',
        'effect-magnetic': '\u{1F9F2}',
        'effect-reveal': '\u{1F441}',
        'effect-stack': '\u{1F0CF}',
    };

    var designPages = pages
        .filter(function(p) { return p.category === 'design' && p.year !== null; })
        .sort(function(a, b) { return a.year - b.year; });

    var conceptPages = pages
        .filter(function(p) { return p.category === 'concept' && p.year !== null; })
        .sort(function(a, b) { return a.year - b.year; });

    var effectPages = pages.filter(function(p) { return p.category === 'effect'; });

    var $iframe = document.getElementById('preview-iframe');
    var $previewTitle = document.getElementById('preview-title');
    var $previewDesc = document.getElementById('preview-desc');
    var $previewOpen = document.getElementById('preview-open');
    var $sidebarScroll = document.getElementById('sidebar-scroll');

    var currentPage = null;
    var activeCard = null;
    var isFirstLoad = true;

    // Render cards
    function renderCards() {
        var frag = document.createDocumentFragment();

        // Design label
        var designLabel = document.createElement('div');
        designLabel.className = 'section-divider';
        designLabel.textContent = 'Trends';
        frag.appendChild(designLabel);

        designPages.forEach(function(page) {
            var btn = document.createElement('button');
            btn.className = 'card';
            btn.dataset.name = page.name;
            btn.innerHTML =
                '<span class="card-year">' + page.year + '</span>' +
                '<div class="card-body">' +
                    '<div class="card-title">' + page.title + '</div>' +
                    '<div class="card-desc">' + page.description + '</div>' +
                '</div>';
            btn.addEventListener('click', function() {
                selectPage(page);
            });
            frag.appendChild(btn);
        });

        // Concepts label
        if (conceptPages.length > 0) {
            var conceptLabel = document.createElement('div');
            conceptLabel.className = 'section-divider';
            conceptLabel.textContent = 'Concepts';
            frag.appendChild(conceptLabel);

            conceptPages.forEach(function(page) {
                var btn = document.createElement('button');
                btn.className = 'card';
                btn.dataset.name = page.name;
                btn.innerHTML =
                    '<span class="card-year">' + page.year + '</span>' +
                    '<div class="card-body">' +
                        '<div class="card-title">' + page.title + '</div>' +
                        '<div class="card-desc">' + page.description + '</div>' +
                    '</div>';
                btn.addEventListener('click', function() {
                    selectPage(page);
                });
                frag.appendChild(btn);
            });
        }

        // Effects label
        if (effectPages.length > 0) {
            var effectLabel = document.createElement('div');
            effectLabel.className = 'section-divider';
            effectLabel.textContent = 'Effects';
            frag.appendChild(effectLabel);

            effectPages.forEach(function(page) {
                var btn = document.createElement('button');
                btn.className = 'card';
                btn.dataset.name = page.name;
                var icon = EFFECT_ICONS[page.name] || '\u2728';
                btn.innerHTML =
                    '<span class="card-icon">' + icon + '</span>' +
                    '<div class="card-body">' +
                        '<div class="card-title">' + page.title + '</div>' +
                        '<div class="card-desc">' + page.description + '</div>' +
                    '</div>';
                btn.addEventListener('click', function() {
                    selectPage(page);
                });
                frag.appendChild(btn);
            });
        }

        $sidebarScroll.appendChild(frag);
    }

    // Update preview (pure UI, no history manipulation)
    function updatePreview(page) {
        if (currentPage && currentPage.name === page.name) return;
        currentPage = page;

        // Update preview info
        $previewTitle.textContent = page.title;
        $previewDesc.textContent = page.description;
        $previewOpen.href = '/' + page.name;

        // Iframe transition
        if (isFirstLoad) {
            isFirstLoad = false;
            $iframe.src = '/' + page.name;
        } else {
            $iframe.classList.add('fade-out');
            setTimeout(function() {
                $iframe.src = '/' + page.name;
                $iframe.onload = function() {
                    $iframe.classList.remove('fade-out');
                };
            }, 150);
        }

        // Active card
        if (activeCard) activeCard.classList.remove('active');
        var card = $sidebarScroll.querySelector('[data-name="' + page.name + '"]');
        if (card) {
            card.classList.add('active');
            activeCard = card;
            card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }

    // Select page (updates UI + pushes hash to history)
    function selectPage(page) {
        updatePreview(page);
        var targetHash = '#' + page.name;
        if (window.location.hash !== targetHash) {
            window.location.hash = page.name;
        }
    }

    // Find page by name
    function findPage(name) {
        return designPages.find(function(p) { return p.name === name; })
            || conceptPages.find(function(p) { return p.name === name; })
            || effectPages.find(function(p) { return p.name === name; });
    }

    // Get all pages in display order
    function getAllPages() {
        return designPages.concat(conceptPages, effectPages);
    }

    // Navigate to next/prev page
    function navigateOffset(offset) {
        var all = getAllPages();
        if (!currentPage || all.length === 0) return;
        var idx = all.findIndex(function(p) { return p.name === currentPage.name; });
        var next = (idx + offset + all.length) % all.length;
        selectPage(all[next]);
    }

    // Keyboard
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
            e.preventDefault();
            navigateOffset(1);
        } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
            e.preventDefault();
            navigateOffset(-1);
        }
    });

    // Back/forward navigation
    window.addEventListener('hashchange', function() {
        var hash = window.location.hash.slice(1);
        var page = findPage(hash);
        if (page) {
            updatePreview(page);
        }
    });

    // Init
    renderCards();

    var hash = window.location.hash.slice(1);
    var initialPage = (hash && findPage(hash)) || designPages[0];
    if (initialPage) {
        if (!hash) {
            history.replaceState(null, '', '#' + initialPage.name);
        }
        updatePreview(initialPage);
    }
</script>
