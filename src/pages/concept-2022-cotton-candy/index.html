<!-- layout: base.html -->
<!-- title: Cotton Candy (2022) -->
<!-- description: Every click is a celebration -->

<style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap');

    :root {
        --bg: #fff5f9;
        --bg-warm: #fff0f5;
        --surface: #ffffff;
        --pink: #ff6b9d;
        --pink-light: #ffd1e1;
        --violet: #c084fc;
        --violet-light: #ede5ff;
        --sky: #7dd3fc;
        --sky-light: #e0f4ff;
        --yellow: #fbbf24;
        --yellow-light: #fef3c7;
        --coral: #fb7185;
        --mint: #6ee7b7;
        --mint-light: #d1fae5;
        --text: #3b1f2b;
        --text-muted: #7a5068;
        --text-dim: #b89aaa;
        --shadow: rgba(180, 100, 140, 0.1);
        --shadow-strong: rgba(180, 100, 140, 0.18);
        --radius: 24px;
        --bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    body {
        font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--bg);
        color: var(--text);
        min-height: 100vh;
        overflow-x: hidden;
    }

    .bg {
        position: fixed;
        inset: 0;
        z-index: 0;
        background:
            radial-gradient(ellipse 80% 60% at 20% 20%, rgba(255, 209, 225, 0.6) 0%, transparent 70%),
            radial-gradient(ellipse 70% 50% at 80% 80%, rgba(192, 132, 252, 0.2) 0%, transparent 70%),
            radial-gradient(ellipse 60% 50% at 60% 10%, rgba(125, 211, 252, 0.3) 0%, transparent 70%);
    }

    .layout {
        position: relative;
        z-index: 1;
        max-width: 720px;
        margin: 0 auto;
        padding: 32px 20px 64px;
    }

    *:focus-visible {
        outline: 2px solid var(--pink);
        outline-offset: 3px;
    }

    /* Static surface — for non-interactive containers */
    .play-card {
        border-radius: var(--radius);
        background: var(--surface);
        box-shadow:
            0 4px 20px var(--shadow),
            0 1px 3px rgba(0, 0, 0, 0.04);
    }

    /* Interactive surface — hover/bounce ONLY on clickable elements */
    .play-card-interactive {
        border-radius: var(--radius);
        background: var(--surface);
        box-shadow:
            0 4px 20px var(--shadow),
            0 1px 3px rgba(0, 0, 0, 0.04);
        cursor: pointer;
        user-select: none;
        transition: transform 0.4s var(--bounce), box-shadow 0.3s;
    }

    .play-card-interactive:hover {
        transform: translateY(-4px);
        box-shadow:
            0 12px 36px var(--shadow-strong),
            0 2px 6px rgba(0, 0, 0, 0.06);
    }

    .play-card-interactive:active {
        transform: translateY(-1px) scale(0.98);
        transition-duration: 0.1s;
    }

    /* Hero */
    .hero {
        text-align: center;
        padding: 64px 0 48px;
    }

    .hero-badge {
        display: inline-block;
        font-size: 0.7rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        padding: 8px 20px;
        border-radius: 20px;
        background: var(--pink-light);
        color: #c0336b;
        margin-bottom: 28px;
    }

    .hero-title {
        font-size: 5rem;
        font-weight: 900;
        letter-spacing: 4px;
        line-height: 1;
        background: linear-gradient(135deg, var(--pink), var(--violet), var(--sky));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .hero-tagline {
        font-size: 1rem;
        color: var(--text-muted);
        margin-top: 20px;
        line-height: 1.7;
        font-weight: 400;
    }

    /* Intro card */
    .intro-card {
        padding: 28px 32px;
        margin-bottom: 48px;
        background: var(--surface);
        border-left: 4px solid var(--pink);
    }

    .intro-text {
        font-size: 0.92rem;
        line-height: 1.9;
        font-weight: 400;
        color: var(--text-muted);
    }

    .intro-text strong {
        font-weight: 700;
        color: var(--text);
    }

    /* Divider */
    .divider {
        margin: 48px 0;
        height: 2px;
        border-radius: 1px;
        background: linear-gradient(90deg, transparent, var(--pink-light), var(--sky-light), transparent);
    }

    /* Section */
    .section {
        margin-bottom: 48px;
    }

    .section-label {
        font-size: 0.7rem;
        font-weight: 700;
        color: var(--coral);
        letter-spacing: 0.1em;
        text-transform: uppercase;
        margin-bottom: 4px;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 12px;
        color: var(--text);
    }

    .section-desc {
        font-size: 0.88rem;
        line-height: 1.8;
        color: var(--text-muted);
        font-weight: 400;
        margin-bottom: 24px;
    }

    .section-desc em {
        color: var(--coral);
        font-style: normal;
        font-weight: 600;
    }

    .section-desc code {
        font-family: 'SF Mono', 'Fira Code', monospace;
        font-size: 0.82em;
        background: var(--pink-light);
        padding: 2px 8px;
        border-radius: 6px;
        color: #c0336b;
    }

    /* Celebration cards */
    .celebration-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
    }

    .celebration-card {
        padding: 28px 16px;
        text-align: center;
        position: relative;
        overflow: visible;
    }

    .celebration-card.card-pink {
        background: var(--pink-light);
        border-bottom: 3px solid var(--pink);
    }
    .celebration-card.card-violet {
        background: var(--violet-light);
        border-bottom: 3px solid var(--violet);
    }
    .celebration-card.card-sky {
        background: var(--sky-light);
        border-bottom: 3px solid var(--sky);
    }

    .celebration-card .tap-hint {
        display: inline-block;
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.06em;
        padding: 3px 10px;
        border-radius: 10px;
        margin-top: 10px;
        color: #fff;
    }

    .card-pink .tap-hint { background: var(--pink); }
    .card-violet .tap-hint { background: var(--violet); }
    .card-sky .tap-hint { background: var(--sky); color: #0c4a6e; }

    .celebration-card-icon {
        font-size: 2.2rem;
        margin-bottom: 10px;
        transition: transform 0.4s var(--bounce);
    }

    .celebration-card:active .celebration-card-icon {
        transform: scale(0.85);
    }

    .celebration-card-label {
        font-size: 0.72rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 4px;
    }

    .card-pink .celebration-card-label { color: #c0336b; }
    .card-violet .celebration-card-label { color: #7c3aed; }
    .card-sky .celebration-card-label { color: #0284c7; }

    .celebration-card-sub {
        font-size: 0.68rem;
        color: var(--text-dim);
        margin-top: 4px;
    }

    .celebration-feedback {
        font-size: 0.7rem;
        font-weight: 700;
        margin-top: 8px;
        min-height: 1.2em;
        color: var(--coral);
        opacity: 0;
        transition: opacity 0.3s;
    }

    .celebration-feedback.show {
        opacity: 1;
    }

    /* Code block */
    .code-block {
        background: #2d1b25;
        border-radius: 16px;
        padding: 18px 22px;
        font-family: 'SF Mono', 'Fira Code', monospace;
        font-size: 0.72rem;
        line-height: 1.9;
        color: rgba(255, 255, 255, 0.5);
        overflow-x: auto;
        margin-top: 20px;
    }

    .code-block .kw { color: var(--pink); }
    .code-block .val { color: var(--mint); }
    .code-block .cmt { color: rgba(255, 255, 255, 0.25); }

    /* Compare grid */
    .compare-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
        margin-bottom: 24px;
    }

    .compare-panel {
        padding: 28px 20px;
        text-align: center;
        border-radius: 20px;
    }

    .compare-panel.chaos {
        background: #fff;
        border: 2px dashed var(--coral);
    }

    .compare-panel.controlled {
        background: var(--mint-light);
        border: 2px solid var(--mint);
    }

    .compare-label {
        font-size: 0.68rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 8px;
    }

    .compare-panel.chaos .compare-label { color: var(--coral); }
    .compare-panel.controlled .compare-label { color: #059669; }

    .compare-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--text);
    }

    .compare-sub {
        font-size: 0.7rem;
        margin-top: 6px;
        font-weight: 500;
        color: var(--text-dim);
    }

    /* Palette demo */
    .palette-demo {
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 20px;
    }

    .palette-swatch {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }

    .swatch-box {
        width: 56px;
        height: 56px;
        border-radius: 16px;
        box-shadow: 0 3px 12px var(--shadow);
    }

    .swatch-label {
        font-size: 0.62rem;
        color: var(--text-dim);
        font-family: 'SF Mono', 'Fira Code', monospace;
        text-align: center;
    }

    /* Charge button */
    .charge-area {
        text-align: center;
        margin-top: 24px;
    }

    .charge-btn {
        position: relative;
        padding: 18px 48px;
        border: none;
        border-radius: 50px;
        font-family: 'Nunito', sans-serif;
        font-size: 1rem;
        font-weight: 800;
        cursor: pointer;
        color: #fff;
        background: linear-gradient(135deg, var(--pink), var(--coral));
        box-shadow: 0 4px 20px rgba(255, 107, 157, 0.35);
        transition: transform 0.4s var(--bounce), box-shadow 0.3s;
        user-select: none;
        -webkit-user-select: none;
        touch-action: none;
        overflow: hidden;
    }

    .charge-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 28px rgba(255, 107, 157, 0.5);
    }

    .charge-btn:active {
        transform: scale(0.97);
    }

    .charge-fill {
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, var(--yellow), #f59e0b);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.05s linear;
        pointer-events: none;
    }

    .charge-btn-text {
        position: relative;
        z-index: 1;
        pointer-events: none;
    }

    .charge-hint {
        font-size: 0.72rem;
        color: var(--text-dim);
        margin-top: 12px;
    }

    /* Ticket booth */
    .booth {
        padding: 28px;
        background: var(--surface);
        border-radius: var(--radius);
        box-shadow: 0 4px 24px var(--shadow);
    }

    .booth-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 4px;
    }

    .booth-icon {
        font-size: 1.2rem;
    }

    .booth-name {
        font-size: 1rem;
        font-weight: 700;
        color: var(--text);
    }

    .booth-sub {
        font-size: 0.72rem;
        color: var(--text-dim);
        font-weight: 500;
        margin-bottom: 20px;
    }

    .tickets {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
        margin-bottom: 24px;
    }

    .ticket {
        text-align: center;
        padding: 20px 12px;
        border-radius: 20px;
    }

    .ticket.pink {
        background: var(--pink-light);
        border-bottom: 3px solid var(--pink);
    }

    .ticket.violet {
        background: var(--violet-light);
        border-bottom: 3px solid var(--violet);
    }

    .ticket.sky {
        background: var(--sky-light);
        border-bottom: 3px solid var(--sky);
    }

    .ticket-emoji {
        font-size: 2.2rem;
        margin-bottom: 8px;
    }

    .ticket-name {
        font-size: 0.85rem;
        font-weight: 700;
    }

    .ticket.pink .ticket-name { color: #c0336b; }
    .ticket.violet .ticket-name { color: #7c3aed; }
    .ticket.sky .ticket-name { color: #0284c7; }

    .ticket-price {
        font-size: 0.68rem;
        color: var(--text-dim);
        margin-top: 2px;
        font-weight: 500;
    }

    .ticket-buy {
        margin-top: 12px;
        padding: 6px 16px;
        border: none;
        border-radius: 50px;
        font-family: 'Nunito', sans-serif;
        font-size: 0.7rem;
        font-weight: 700;
        cursor: pointer;
        color: #fff;
        transition: transform 0.4s var(--bounce);
    }

    .ticket-buy:active {
        transform: scale(0.9);
    }

    .ticket.pink .ticket-buy { background: var(--pink); }
    .ticket.violet .ticket-buy { background: var(--violet); }
    .ticket.sky .ticket-buy { background: var(--sky); color: #0c4a6e; }

    .booth-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 16px;
        border-top: 1px solid rgba(0, 0, 0, 0.06);
    }

    .booth-footer-label {
        font-size: 0.78rem;
        font-weight: 600;
        color: var(--text-muted);
    }

    /* Toggle */
    .play-toggle {
        width: 52px;
        height: 28px;
        border-radius: 14px;
        background: #e8dae0;
        border: none;
        position: relative;
        cursor: pointer;
        transition: background 0.3s;
    }

    .play-toggle::after {
        content: '';
        position: absolute;
        top: 3px;
        left: 3px;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
        transition: transform 0.3s var(--bounce), background 0.3s;
    }

    .play-toggle.on {
        background: var(--pink);
    }

    .play-toggle.on::after {
        transform: translateX(24px);
        background: #fff;
    }

    /* Rules */
    .rules-card {
        padding: 24px 28px;
        background: var(--surface);
    }

    .rules-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .rules-list li {
        font-size: 0.85rem;
        padding: 10px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 400;
        color: var(--text-muted);
    }

    .rules-list li:last-child { border-bottom: none; }
    .rules-list .x { color: var(--coral); font-weight: 800; font-size: 0.9rem; }
    .rules-list .o { color: #10b981; font-weight: 800; font-size: 0.9rem; }

    /* Manifesto */
    .manifesto {
        text-align: center;
        margin-top: 56px;
    }

    .manifesto-text {
        font-size: 1.3rem;
        font-weight: 700;
        line-height: 1.8;
        background: linear-gradient(135deg, var(--pink), var(--violet));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .manifesto-sub {
        font-size: 0.8rem;
        color: var(--text-dim);
        margin-top: 14px;
        line-height: 1.7;
        font-weight: 400;
    }

    /* Confetti particles */
    .confetti-piece {
        position: fixed;
        z-index: 100;
        pointer-events: none;
        width: 10px;
        height: 6px;
        border-radius: 2px;
        animation: confetti-fall 1.2s ease-out forwards;
    }

    @keyframes confetti-fall {
        0% {
            opacity: 1;
            transform: translate(0, 0) rotate(0deg) scale(1);
        }
        100% {
            opacity: 0;
            transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(0.3);
        }
    }

    /* Fireworks canvas */
    .fireworks-canvas {
        position: fixed;
        inset: 0;
        z-index: 99;
        pointer-events: none;
    }

    /* Party mode bounce */
    @keyframes party-bounce {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        25% { transform: translateY(-6px) rotate(-1deg); }
        50% { transform: translateY(0) rotate(0deg); }
        75% { transform: translateY(-4px) rotate(1deg); }
    }

    .party-mode .play-card-interactive,
    .party-mode .ticket {
        animation: party-bounce 1.2s var(--bounce) infinite;
    }

    .party-mode .play-card-interactive:nth-child(2),
    .party-mode .ticket:nth-child(2) {
        animation-delay: 0.15s;
    }

    .party-mode .play-card-interactive:nth-child(3),
    .party-mode .ticket:nth-child(3) {
        animation-delay: 0.3s;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }

        .confetti-piece { display: none; }

        .play-card-interactive:hover { transform: none; }
        .charge-btn:hover { transform: none; }
    }

    @media screen and (max-width: 600px) {
        .hero-title { font-size: 3rem; }

        .celebration-grid,
        .compare-grid,
        .tickets { grid-template-columns: 1fr; }

        .intro-card,
        .rules-card { padding: 20px 24px; }

        .booth { padding: 20px; }

        .palette-demo { gap: 8px; }
        .swatch-box { width: 44px; height: 44px; }

        .charge-btn {
            width: 100%;
            padding: 18px 24px;
        }
    }
</style>

<body>
    <div class="bg"></div>
    <canvas class="fireworks-canvas" id="fw-canvas" aria-hidden="true"></canvas>
    <div class="layout">

        <!-- 1. Hero -->
        <header class="hero">
            <div class="hero-badge">Sweet Interface</div>
            <h1 class="hero-title">CANDY</h1>
            <p class="hero-tagline">
                Every click is a celebration.<br>
                Cotton Candy turns interaction into joy.
            </p>
        </header>

        <!-- 2. Intro Card -->
        <div class="play-card intro-card">
            <p class="intro-text">
                Cotton Candy is <strong>claymorphism that went to an amusement park.</strong>
                Where claymorphism made UI feel warm and touchable,
                Cotton Candy makes it feel alive and celebratory.
                <br><br>
                The triple shadow becomes a <strong>soft glow.</strong>
                The muted palette becomes <strong>cotton-candy pastels.</strong>
                The gentle hover becomes a <strong>bounce.</strong>
                And every meaningful interaction earns a moment of delight
                &mdash; a burst of confetti, a shower of fireworks.
                <br><br>
                <strong>Not decoration. Feedback.</strong> The celebration
                is the interface telling you: "Something good just happened."
            </p>
        </div>

        <!-- 3. Divider -->
        <div class="divider"></div>

        <!-- 4. Principle 01: Celebration as Interface -->
        <section class="section">
            <div class="section-label">Principle 01</div>
            <h2 class="section-title">Celebration as Interface</h2>
            <p class="section-desc">
                In Cotton Candy, <em>celebration is not decoration</em> &mdash;
                it's the primary feedback mechanism. A confetti burst on click
                tells you "that worked" in a way no toast notification ever could.
                Each card below is a trigger. Click one.
            </p>
            <div class="celebration-grid">
                <div class="play-card-interactive celebration-card card-pink" role="button" tabindex="0">
                    <div class="celebration-card-icon">&#x1F389;</div>
                    <div class="celebration-card-label">Party</div>
                    <div class="celebration-card-sub">Click for confetti</div>
                    <span class="tap-hint">Tap!</span>
                    <div class="celebration-feedback" aria-live="polite"></div>
                </div>
                <div class="play-card-interactive celebration-card card-violet" role="button" tabindex="0">
                    <div class="celebration-card-icon">&#x2728;</div>
                    <div class="celebration-card-label">Sparkle</div>
                    <div class="celebration-card-sub">Click for confetti</div>
                    <span class="tap-hint">Tap!</span>
                    <div class="celebration-feedback" aria-live="polite"></div>
                </div>
                <div class="play-card-interactive celebration-card card-sky" role="button" tabindex="0">
                    <div class="celebration-card-icon">&#x1F680;</div>
                    <div class="celebration-card-label">Launch</div>
                    <div class="celebration-card-sub">Click for confetti</div>
                    <span class="tap-hint">Tap!</span>
                    <div class="celebration-feedback" aria-live="polite"></div>
                </div>
            </div>
            <div class="code-block">
                <span class="cmt">/* cotton candy surface */</span><br>
                <span class="kw">background</span>: <span class="val">#ffffff</span>;<br>
                <span class="kw">border-radius</span>: <span class="val">24px</span>;<br>
                <span class="kw">box-shadow</span>:<br>
                &nbsp;&nbsp;<span class="val">0 4px 20px</span> rgba(180,100,140,0.1),<span class="cmt">  /* soft depth */</span><br>
                &nbsp;&nbsp;<span class="val">0 1px 3px</span> rgba(0,0,0,0.04);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cmt">  /* crispness */</span><br>
                <span class="kw">transition</span>: <span class="val">transform 0.4s</span><br>
                &nbsp;&nbsp;<span class="val">cubic-bezier(0.34, 1.56, 0.64, 1)</span>;<span class="cmt"> /* bounce */</span>
            </div>
        </section>

        <!-- 5. Principle 02: Controlled Chaos -->
        <section class="section">
            <div class="section-label">Principle 02</div>
            <h2 class="section-title">Controlled Chaos</h2>
            <p class="section-desc">
                Amusement park energy without amusement park disorder. Every burst has a
                <em>particle budget</em>, every animation a <em>duration cap</em>.
                The chaos is real &mdash; it's just on a leash.
            </p>
            <div class="compare-grid">
                <div class="compare-panel chaos">
                    <div class="compare-label">Uncontrolled</div>
                    <div class="compare-value">&#x1F4A5; Chaos</div>
                    <div class="compare-sub">Infinite particles, no cleanup</div>
                </div>
                <div class="compare-panel controlled">
                    <div class="compare-label">Controlled</div>
                    <div class="compare-value">&#x2728; Play</div>
                    <div class="compare-sub">50 max, 1.2s auto-remove</div>
                </div>
            </div>
            <p class="section-desc" style="margin-bottom: 16px;">
                The Cotton Candy palette: cotton-candy pastels bright enough
                to feel like sunshine, soft enough to feel like a hug.
            </p>
            <div class="palette-demo">
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--pink);"></div>
                    <span class="swatch-label">Pink</span>
                </div>
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--violet);"></div>
                    <span class="swatch-label">Violet</span>
                </div>
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--sky);"></div>
                    <span class="swatch-label">Sky</span>
                </div>
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--yellow);"></div>
                    <span class="swatch-label">Yellow</span>
                </div>
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--coral);"></div>
                    <span class="swatch-label">Coral</span>
                </div>
                <div class="palette-swatch">
                    <div class="swatch-box" style="background: var(--mint);"></div>
                    <span class="swatch-label">Mint</span>
                </div>
            </div>
        </section>

        <!-- 6. Principle 03: Joy is the Feature -->
        <section class="section">
            <div class="section-label">Principle 03</div>
            <h2 class="section-title">Joy is the Feature</h2>
            <p class="section-desc">
                Not every interaction needs to be instant. Sometimes the best
                feedback is <em>anticipation</em>. Hold the button below.
                The longer you hold, the bigger the fireworks.
            </p>
            <div class="charge-area">
                <button class="charge-btn" id="charge-btn">
                    <div class="charge-fill" id="charge-fill"></div>
                    <span class="charge-btn-text">Hold to Charge</span>
                </button>
                <p class="charge-hint">Press and hold, then release to launch fireworks</p>
            </div>
        </section>

        <!-- 7. Divider -->
        <div class="divider"></div>

        <!-- 8. All Together: Play Fest 2022 -->
        <section class="section">
            <div class="section-label">All Together</div>
            <h2 class="section-title">Play Fest 2022</h2>
            <p class="section-desc">
                A festival ticket booth doesn't need corporate sobriety.
                It needs the smell of cotton candy, the sound of carousel music,
                and the feeling that something exciting is about to happen. Buy a ticket.
            </p>
            <div class="booth">
                <div class="booth-header">
                    <span class="booth-icon">&#x1F3AA;</span>
                    <span class="booth-name">Play Fest 2022</span>
                </div>
                <div class="booth-sub">Pick your experience</div>
                <div class="tickets">
                    <div class="play-card-interactive ticket pink">
                        <div class="ticket-emoji">&#x1F3A0;</div>
                        <div class="ticket-name">Carousel</div>
                        <div class="ticket-price">$25 / person</div>
                        <button class="ticket-buy">Buy</button>
                    </div>
                    <div class="play-card-interactive ticket violet">
                        <div class="ticket-emoji">&#x1F3A1;</div>
                        <div class="ticket-name">Ferris Wheel</div>
                        <div class="ticket-price">$35 / person</div>
                        <button class="ticket-buy">Buy</button>
                    </div>
                    <div class="play-card-interactive ticket sky">
                        <div class="ticket-emoji">&#x1F3A2;</div>
                        <div class="ticket-name">Coaster</div>
                        <div class="ticket-price">$45 / person</div>
                        <button class="ticket-buy">Buy</button>
                    </div>
                </div>
                <div class="booth-footer">
                    <span class="booth-footer-label">Party Mode</span>
                    <button class="play-toggle" id="party-toggle" role="switch" aria-checked="false" aria-label="Toggle party mode"></button>
                </div>
            </div>
        </section>

        <!-- 9. Divider -->
        <div class="divider"></div>

        <!-- 10. The Rules -->
        <section class="section">
            <h2 class="section-title">The Rules</h2>
            <div class="play-card rules-card">
                <ul class="rules-list">
                    <li><span class="x">&#x2717;</span> Celebrate everything &mdash; only meaningful actions earn effects</li>
                    <li><span class="x">&#x2717;</span> Bounce on non-interactive elements &mdash; motion is affordance, not decoration</li>
                    <li><span class="x">&#x2717;</span> Infinite particles &mdash; always cap, always auto-remove</li>
                    <li><span class="x">&#x2717;</span> Skip reduced-motion &mdash; always provide static text fallback</li>
                    <li><span class="x">&#x2717;</span> Every card looks the same &mdash; interactive and static must feel different</li>
                    <li><span class="x">&#x2717;</span> Festival aesthetic for serious contexts &mdash; banking, medical, legal</li>
                    <li><span class="o">&#x2713;</span> Interactive elements get color borders + lift on hover &mdash; clear affordance</li>
                    <li><span class="o">&#x2713;</span> Confetti on success, fireworks on milestones</li>
                    <li><span class="o">&#x2713;</span> Particle budgets &mdash; 50 confetti max, 15 fireworks max</li>
                    <li><span class="o">&#x2713;</span> Bounce easing on interactive elements only &mdash; <code>cubic-bezier(0.34, 1.56, 0.64, 1)</code></li>
                </ul>
            </div>
        </section>

        <!-- 11. Manifesto -->
        <footer class="manifesto">
            <p class="manifesto-text">
                Not every interface needs<br>
                to be productive.<br>
                Some need to be a party.
            </p>
            <p class="manifesto-sub">
                Claymorphism gave UI warmth. Cotton Candy gives it joy.<br>
                The celebration isn't the decoration &mdash; it's the feature.
            </p>
        </footer>
    </div>
</body>

<script>
    /* Utilities */
    function randomNumber(min, max) {
        return Math.round(Math.random() * (max - min) + min);
    }

    var reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    /* ========================================
       1. Confetti burst (CSS animation based)
       ======================================== */
    function burstConfetti(x, y, count) {
        if (reducedMotion) return;

        var total = Math.min(count, 50);
        var colors = ['#ff6b9d', '#c084fc', '#7dd3fc', '#fbbf24', '#fb7185', '#6ee7b7'];

        for (var i = 0; i < total; i++) {
            var piece = document.createElement('div');
            piece.className = 'confetti-piece';
            piece.style.left = x + 'px';
            piece.style.top = y + 'px';
            piece.style.background = colors[randomNumber(0, colors.length - 1)];

            var angle = (Math.PI * 2 / total) * i + (Math.random() - 0.5) * 0.5;
            var dist = randomNumber(60, 180);

            piece.style.setProperty('--dx', Math.cos(angle) * dist + 'px');
            piece.style.setProperty('--dy', Math.sin(angle) * dist + 'px');
            piece.style.setProperty('--rot', randomNumber(180, 720) + 'deg');
            piece.style.animationDelay = (Math.random() * 0.1) + 's';

            document.body.appendChild(piece);

            (function(el) {
                setTimeout(function() {
                    if (el.parentNode) el.parentNode.removeChild(el);
                }, 1300);
            })(piece);
        }
    }

    /* ========================================
       2. Fireworks (Canvas based — lightweight)
       ======================================== */
    var fwCanvas = document.getElementById('fw-canvas');
    var fwCtx = fwCanvas.getContext('2d');
    var fwRockets = [];
    var fwSparks = [];

    function resizeCanvas() {
        fwCanvas.width = window.innerWidth;
        fwCanvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    /* Simple spark — no trail, no shadowBlur */
    function Spark(x, y, dx, dy, r, g, b) {
        this.x = x;
        this.y = y;
        this.dx = dx;
        this.dy = dy;
        this.r = r;
        this.g = g;
        this.b = b;
        this.life = 1.0;
        this.decay = 0.012 + Math.random() * 0.012;
    }

    Spark.prototype.update = function() {
        this.life -= this.decay;
        this.x += this.dx;
        this.y += this.dy;
        this.dy += 0.04;
        this.dx *= 0.985;
        this.dy *= 0.985;
    };

    Spark.prototype.dead = function() {
        return this.life <= 0;
    };

    /* Rocket going up */
    function Rocket(x, dy, r, g, b) {
        this.x = x;
        this.y = fwCanvas.height;
        this.dy = dy;
        this.r = r;
        this.g = g;
        this.b = b;
    }

    Rocket.prototype.update = function() {
        this.dy *= 0.98;
        this.y -= this.dy;
    };

    Rocket.prototype.shouldExplode = function() {
        return this.dy < 1.5;
    };

    var fwRunning = false;

    function fwLoop() {
        fwCtx.clearRect(0, 0, fwCanvas.width, fwCanvas.height);

        /* Update rockets */
        for (var i = fwRockets.length - 1; i >= 0; i--) {
            var rk = fwRockets[i];
            rk.update();

            if (rk.shouldExplode()) {
                /* Explode into sparks */
                var count = randomNumber(30, 50);
                for (var j = 0; j < count; j++) {
                    var angle = (Math.PI * 2 / count) * j + (Math.random() - 0.5) * 0.4;
                    var speed = 2 + Math.random() * 4;
                    fwSparks.push(new Spark(
                        rk.x, rk.y,
                        Math.cos(angle) * speed,
                        Math.sin(angle) * speed - 1,
                        rk.r, rk.g, rk.b
                    ));
                }
                fwRockets.splice(i, 1);
            } else {
                /* Draw rocket dot */
                fwCtx.beginPath();
                fwCtx.arc(rk.x, rk.y, 2.5, 0, Math.PI * 2);
                fwCtx.fillStyle = 'rgba(' + rk.r + ',' + rk.g + ',' + rk.b + ',0.9)';
                fwCtx.fill();
            }
        }

        /* Update sparks — batch by color to minimise state changes */
        for (var i = fwSparks.length - 1; i >= 0; i--) {
            var sp = fwSparks[i];
            sp.update();
            if (sp.dead()) {
                fwSparks.splice(i, 1);
                continue;
            }
            var size = 2.5 * sp.life;
            fwCtx.beginPath();
            fwCtx.arc(sp.x, sp.y, size, 0, Math.PI * 2);
            fwCtx.fillStyle = 'rgba(' + sp.r + ',' + sp.g + ',' + sp.b + ',' + sp.life + ')';
            fwCtx.fill();
        }

        if (fwRockets.length > 0 || fwSparks.length > 0) {
            window.requestAnimationFrame(fwLoop);
        } else {
            fwRunning = false;
        }
    }

    function launchFireworks(count, fromX) {
        if (reducedMotion) return;

        var palettes = [
            [255, 107, 157],
            [192, 132, 252],
            [125, 211, 252],
            [251, 191, 36],
            [251, 113, 133],
            [110, 231, 183]
        ];
        var maxDy = Math.max(Math.round(fwCanvas.height / 80), 6);
        var total = Math.min(count, 15 - fwRockets.length);

        for (var i = 0; i < total; i++) {
            var x = fromX !== undefined ? fromX + randomNumber(-80, 80) : randomNumber(100, fwCanvas.width - 100);
            var c = palettes[randomNumber(0, palettes.length - 1)];
            (function(px, col, delay) {
                setTimeout(function() {
                    fwRockets.push(new Rocket(px, randomNumber(5, maxDy), col[0], col[1], col[2]));
                    if (!fwRunning) {
                        fwRunning = true;
                        fwLoop();
                    }
                }, delay);
            })(x, c, i * 100);
        }

        if (!fwRunning) {
            fwRunning = true;
            fwLoop();
        }
    }

    /* ========================================
       3. Celebration card clicks (confetti)
       ======================================== */
    var celebrationCards = document.querySelectorAll('.celebration-card');
    celebrationCards.forEach(function(card) {
        card.addEventListener('click', function() {
            var rect = card.getBoundingClientRect();
            var cx = rect.left + rect.width / 2;
            var cy = rect.top + rect.height / 2;
            burstConfetti(cx, cy, 35);

            var fb = card.querySelector('.celebration-feedback');
            if (fb) {
                fb.textContent = 'Celebrated!';
                fb.classList.add('show');
                setTimeout(function() { fb.classList.remove('show'); }, 1000);
            }
        });
    });

    /* ========================================
       4. Charge button (hold to charge -> fireworks)
       ======================================== */
    var chargeBtn = document.getElementById('charge-btn');
    var chargeFill = document.getElementById('charge-fill');
    var chargeInterval = null;
    var chargeValue = 0;

    function startCharge() {
        chargeValue = 0;
        chargeInterval = setInterval(function() {
            chargeValue = Math.min(chargeValue + 2, 100);
            chargeFill.style.transform = 'scaleX(' + (chargeValue / 100) + ')';
        }, 30);
    }

    function releaseCharge() {
        if (chargeInterval) {
            clearInterval(chargeInterval);
            chargeInterval = null;
        }

        if (chargeValue > 0) {
            var power = Math.ceil(chargeValue / 100 * 10);
            var rect = chargeBtn.getBoundingClientRect();
            var cx = rect.left + rect.width / 2;

            if (reducedMotion) {
                chargeBtn.querySelector('.charge-btn-text').textContent = power + ' fireworks launched!';
                setTimeout(function() {
                    chargeBtn.querySelector('.charge-btn-text').textContent = 'Hold to Charge';
                }, 1500);
            } else {
                launchFireworks(power, cx);
            }
        }

        chargeValue = 0;
        chargeFill.style.transform = 'scaleX(0)';
    }

    chargeBtn.addEventListener('mousedown', startCharge);
    chargeBtn.addEventListener('mouseup', releaseCharge);
    chargeBtn.addEventListener('mouseleave', releaseCharge);
    chargeBtn.addEventListener('touchstart', function(e) {
        e.preventDefault();
        startCharge();
    });
    chargeBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        releaseCharge();
    });

    /* ========================================
       5. Ticket buy buttons (fireworks)
       ======================================== */
    var ticketBuyBtns = document.querySelectorAll('.ticket-buy');
    ticketBuyBtns.forEach(function(btn) {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            var rect = btn.getBoundingClientRect();
            var cx = rect.left + rect.width / 2;

            if (reducedMotion) {
                btn.textContent = 'Purchased!';
                setTimeout(function() { btn.textContent = 'Buy'; }, 1500);
            } else {
                launchFireworks(3, cx);
                burstConfetti(rect.left + rect.width / 2, rect.top, 25);
                btn.textContent = 'Purchased!';
                setTimeout(function() { btn.textContent = 'Buy'; }, 1500);
            }
        });
    });

    /* ========================================
       6. Party Mode toggle
       ======================================== */
    var partyToggle = document.getElementById('party-toggle');
    partyToggle.addEventListener('click', function() {
        this.classList.toggle('on');
        var isOn = this.classList.contains('on');
        this.setAttribute('aria-checked', String(isOn));
        document.body.classList.toggle('party-mode', isOn);
    });
</script>
